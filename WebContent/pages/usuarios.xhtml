<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">


	<p:outputPanel id="panelCadastroUsuario" >
		<h:panelGroup rendered="#{usuarioBean.cadastroRendered}">
		
		<p:panel header="#{msg['usuario.register']}"  >
		<h:form id="formCadastroUsuario"  rendered="#{usuarioBean.cadastroRendered}">
			
				<p:toolbar id="tbUsuarioCadastrar"  acceptcharset="ISO-8859-1">
						    <f:facet name="left">
								<p:commandButton value="#{msg['msg.comum.botao.salvar']}" ajax="true"  actionListener="#{usuarioBean.cadastroUsuario()}"
												  icon="ui-icon-disk"/>
								<p:commandButton value="#{msg['msg.comum.botao.pesquisar']}" ajax="true" immediate="true" icon="ui-icon-search"  
								>
									<p:ajax event="click"    
											/>
								</p:commandButton>
								<p:commandButton value="#{msg['msg.comum.botao.novo']}" icon="ui-icon-document"   
									ajax="true" process="@this" 
								/>
								<p:commandButton icon="ui-icon-trash" onclick="PF('deletaDialogUsuario').show()"   
									value="#{msg['msg.comum.botao.excluir']}" 
									process="@this" rendered="#{usuarioBean.botaoApagarRendered}"
													/>
						    </f:facet>
						    </p:toolbar>
						    
						    	<h:panelGrid columnClasses="outputLabel, inputText" styleClass="grid" cellpadding="0">
							<p:messages id="msgCadastroUsuario" closable="true" />
							
								<h:panelGrid columns="3">
								<h:panelGrid  columns="1">
									<p:outputLabel value="#{msg['usuario.cpf']}" for= "usuario"/>
									<p:inputText id="usuario" style="width: 192px;" required="true"
										requiredMessage="Campo obrigatório." >
										<p:ajax event="change"
												 update=":formCadastroUsuario" />
									</p:inputText>
								</h:panelGrid>
								<h:panelGrid  columns="1">
									<p:outputLabel value="&nbsp;" />
									<p:commandButton icon="ui-icon-search"
													onclick="PF('dlgLupausuarioUsuario').show();" ajax="true"
													immediate="true"
													process="@this"
													 />
								 </h:panelGrid>
								<h:panelGrid  columns="1">
									<p:outputLabel value="#{msg['usuario.nome']}" for="usuarioNome" />
									<p:inputText id="usuarioNome" required="true" readonly="true" label="#{msg['usuario.nome']}"
										style="width: 300px" />
								</h:panelGrid>
							</h:panelGrid>
							
							</h:panelGrid>
		
		
		</h:form>
		</p:panel>
		</h:panelGroup>
		</p:outputPanel>
		
			<h:panelGroup rendered="#{usuarioBean.pesquisaRendered}">
				<h:form id="formPesquisaUsuario" >
					<p:defaultCommand target="findButton"/>
					
					<p:panel header="#{msg['usuario.search']}" style="width: 99.3%;">
						<p:toolbar id="tbCargoPesquisar">
						    <f:facet name="left">
								<p:commandButton value="#{msg['msg.comum.botao.novo']}" ajax="true" immediate="true"
												 icon="ui-icon-document"
												 >
									<p:ajax event="click"    
											update=":panelCadastroUsuario"
											listener="#{usuarioBean.acaoCadastrar()}" 
											/>
								</p:commandButton>
								<p:commandButton value="#{msg['msg.comum.botao.alterar']}" ajax="true"  
												 icon="ui-icon-wrench"
												 >
									<p:ajax event="click"    
											listener="#{usuarioBean.acaoAlterar()}"
												 update=":panelCadastroUsuario"
											/>
								</p:commandButton>
								<p:commandButton value="#{msg['msg.comum.botao.limpar']}" ajax="true"  
												 icon="ui-icon-cancel">
									<p:ajax event="click"    
											listener="#{usuarioBean.limpaBean()}"
												 update=":panelCadastroUsuario"/>
								</p:commandButton>
						    </f:facet>
						</p:toolbar>
						<p:separator style="width:100%;height:5px;" />
							<h:panelGrid> 
								<h:panelGrid >
									<h:outputText value="#{msg['msg.comum.pesquisar.opcao']}" />
								</h:panelGrid>
								<h:panelGrid >
									<h:panelGrid>
										<p:outputLabel value="#{msg['usuario.nome']}" />
										<p:inputText value="#{usuarioBean.usuario.nome}" style="width:150px;" />
									</h:panelGrid>
									<h:panelGrid columns="2">
										<h:panelGrid>
											<p:outputLabel value="#{msg['usuario.cpf']}" for= "usuario"/>
											<p:inputText id="usuario" style="width: 192px;" 
												value="#{usuarioBean.usuario.cpf}" 
												requiredMessage="Campo obrigatório." >
												<p:ajax event="change"
													listener="#{usuarioBean.procurarUsuario()}" update=":formPesquisaUsuario" />
											</p:inputText>
										</h:panelGrid>
										<h:panelGrid>
											<p:outputLabel value="#{msg['usuario.nome']}" for="usuarioNome" />
											<p:inputText id="usuarioNome" readonly="true" label="#{msg['usuario.nome']}"
												value="#{usuarioBean.usuario.nome}" style="width: 300px" />
										</h:panelGrid>
									</h:panelGrid>
								</h:panelGrid>
								<f:facet name="footer" >
									<h:panelGrid >
						                <p:commandButton id="findButton" value="#{msg['msg.comum.pesquisar']}" icon="ui-icon-search"  ajax="true"
						                	actionListener="#{usuarioBean.procurarUsuario()}" 
						                	  update="formPesquisaUsuario"
						                                   >
						                </p:commandButton>  
									</h:panelGrid>
							    </f:facet>
								<p:messages id="msgPesquisaUsuario" closable="true" />
							</h:panelGrid>
						<p:separator style="width:100%;height:5px;" />
						
						<br />
					
					    <p:dataTable id="usuarios" var="usuario" value="#{usuarioBean.listaUsuarios}" rowKey="#{usuario.id}"
					    			 selectionMode="single" 
					                 paginator="true" rows="10"  
					                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"  
					                 rowsPerPageTemplate="10,20,30"
					                 scrollRows="10" scrollable="true"  scrollHeight="150"
                 					 lazy="true" 
                 					 rowIndexVar="rowIndex"
                 					 emptyMessage="Nenhum Registro Encontrado"					                 
					                 >  
							
<!-- 					        <p:ajax event="rowSelect" listener="#{usuarioBean.selecionarObjetoEvent}" />         -->
					        
					        <p:column  style="text-align: center;width:30px;">  
					            <f:facet name="header">  
					                <h:outputText value="#{msg['usuario.id']}" />  
					            </f:facet>  
					            <h:outputText value="#{usuario.id} " >
					            </h:outputText>   
					        </p:column>  
					  
					        <p:column style="text-align: left;" >  
					            <f:facet name="header" >  
					                <h:outputText value="#{msg['usuario.nome']}" />  
					            </f:facet>  
					            <h:outputText value="#{usuario.nome}" />
					        </p:column>  
					  
					    </p:dataTable>
					</p:panel>
				      
				</h:form>
			</h:panelGroup>		
		
		
	
	
	
	</html>